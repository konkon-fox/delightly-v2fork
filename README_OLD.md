# 元仕様

https://delight.rentalbbs.net/delight.html に記載されていた仕様情報です。  
v2-fork 版(当スクリプト)では変更されている場合があります。

## 概要

そのまま設置すればレンタル掲示板として使えますし、/test/createcode.cgi に作成パスを入れれば一般の掲示板としても使えます  
※認証には reCAPTCHA への登録、画像アップロード機能には imgurAPI への登録が必要です  
※このスクリプトの使用に関して発生したいかなるトラブルにも責任を負いかねます  
※慌てて開発したので致命的ではない不具合がいくつかあります

## 設置方法

v2.zip を解凍後、v2 ディレクトリ内の全てのディレクトリやファイルを設置  
設置後/test/create.php にアクセスして板を作成  
作成後/test/admin.php にアクセスしてログイン・板設定変更  
※利用者に勝手に掲示板を作成されないようにするには/test/createcode.cgi に作成パスを入れてください

## 注意事項

- PHP 7.4 - PHP 8.2 で動作確認済
- 設置先のサーバで mbstring が有効化されている必要があります

## スレッドフロート型掲示板共通の機能

スレッド、age/sage、トリップ(10 桁・12 桁)、専用ブラウザ、ID、ID 末尾、回線別ニックネーム表示など

## delight 独自の機能

TL、認証システム、地域名表示、本文の装飾、アイコン機能など

## その他仕様

- メール欄は表示されません(不可視化)。代わりに ID 末尾等の情報が表示されます
- Web 版が大幅に拡張されています(後述)
- 掲示板の設定で過去ログを残すか消去するか選択可能

## 認証システムとは

- スパムや荒らしの対策のため投稿を行うには reCAPTCHA を用いた認証を行い、鍵を発行する必要があります
  細かな仕様はこちら -> [ClientID(同意鍵)システム(v2)](https://w.atwiki.jp/3chjp/pages/36.html)

## TL(タイムライン)とは

- 掲示板に投稿されたレスを最新順に並べたものです ※専ブラ版 TL は古い順
- TL のみに投稿することもできます(TL 限定投稿). Web 版、専ブラ版共に TL の投稿欄から投稿してください
- TL には過去ログはありません. TL 限定投稿は TL の保持数を超えた時点で閲覧できなくなります
- 「sage」での投稿は TL に反映されません
- 専ブラ版 TL では 1 番目にローカルルール、2 番目に告知欄が表示されています

## ID について

ID が変わるまでの時間は掲示板毎の設定で変更できます ※コマンド機能が有効の掲示板ではスレッド毎にも変更できます  
ID の生成仕様は 5ch.net/bbspink.com の KOROKORO と似た仕様ですが一部異なる部分があります  
生成仕様の詳細は以下の通りです：  
自演防止のため認証時の情報を使用して ID を生成  
認証時の回線が固定回線(末尾 0): 1234-ABCD  
認証時の回線が固定回線(末尾 0)以外: S234-ABCD  
1,2 -> IP 第一オクテット  
3,4 -> プロバイダ名  
A,B -> UserAgent  
C,D -> ブラウザのヘッダ等情報  
S -> 回線別末尾(a,d,M など)  
ID、ID 末尾、回線別ニックネーム等の細かな仕様はこちら -> [BBS_SLIP(v2)](https://w.atwiki.jp/3chjp/pages/37.html)

## Web 版について

- Web ブラウザで掲示板の TL、スレ一覧、履歴、未読のいずれかのページで「ホーム画面に追加」「ショートカットを作成」などを行うと Web アプリ風に使えます
- ダークモードが使用可能 ※初期設定では端末のテーマに自動で合わせます
- ID、ワード、タイトルのミュート(NG)機能を使用可能(一部を除き正規表現も使用可)
- 履歴、未読表示に対応(掲示板毎・過去ログは不可)
- スレッド検索、スレ内検索が可能(正規表現使用可)
- 返信機能、レスや URL などのコピー、次スレッド作成、ID 抽出など

## コマンド機能・スレッド主機能について

コマンド機能とスレッド主機能はそれぞれ掲示板の設定で有効になっている場合は使用できます  
細かな仕様はこちら -> [コマンド一覧(v2)](https://w.atwiki.jp/3chjp/pages/35.html)
